# Metadata Recovery Strategy

## üéØ Smart Approach: Verify Before Restoring

> **Available Metadata**: The ibi database contains **5,312 AI-generated content tags**, **50+ user albums** with meaningful names, complete GPS/EXIF data, and comprehensive file metadata. See [metadata_summary.md](metadata_summary.md) for full details.

## üìã What to Preserve vs. Filter

### ‚úÖ **Keep: Portable, Valuable Data**

#### 1. AI Content Tags (5,312 instances)

- **Content analysis**: "person", "child", "beach", "building", "car"
- **Auto-generated by computer vision**
- **Reason**: Content description works in any photo system

#### 2. Album Organization (50+ albums)

- **Meaningful names**: "Jon's graduation", "Sisters", "Hawaii 2010"
- **User-created organization**
- **Reason**: Translates to any photo app folder structure

#### 3. GPS and Location Data

- **Coordinate data**: Latitude/longitude from original photos
- **Location names**: City, province, country
- **Reason**: Geographic data is universally useful

#### 4. Camera/EXIF Data

- **Technical metadata**: Camera make/model, settings
- **Capture data**: Original timestamps, dimensions
- **Reason**: Standard EXIF data works everywhere

### ‚ùå **Filter Out: ibi Ecosystem Lock-in**

When exporting metadata, **exclude these ibi-specific elements**:

- **User authentication data**: auth0 IDs, device UUIDs
- **Sharing system data**: Dead cloud sharing links
- **Internal permissions**: ibi-specific access controls
- **Custom hashes**: Internal file tracking
- **Version data**: ibi internal versioning system

_The export tools automatically filter out vendor lock-in data while preserving valuable content._

Instead of blindly writing metadata back into files, we take a verification-first approach:

### 1. Check What's Already There

The `--verify-metadata` option checks if the original EXIF/GPS data is still in the recovered files. Many times, data recovery preserves the original metadata.

**What to check for:**

- ‚úÖ Camera EXIF data (make, model, settings)
- ‚úÖ GPS coordinates (if photos originally had GPS)
- ‚úÖ Original timestamps
- ‚úÖ Image dimensions and technical specs

### 2. Only Restore Missing Original Data

If the verification shows missing metadata that **originally came from the camera/device**, then consider restoring it:

**Safe to restore:**

- Camera make/model (if missing)
- GPS coordinates (if missing and originally present)
- Original capture dates (if missing)
- Technical specs (dimensions, etc.)

**DON'T restore automatically:**

- AI-generated tags (these are ibi additions)
- Album associations (user-created in ibi)
- Ratings/reactions (social features)

### 3. Export ibi-Specific Data in Standard Formats

Instead of forcing ibi's metadata into files, export it in formats that popular software can import:

## üì§ Standard Export Formats

### Adobe Lightroom

- **Format**: Keywords CSV
- **Contains**: AI tags as keywords, albums, descriptions, GPS
- **Import**: File > Import Keywords from File

### digiKam

- **Format**: Metadata CSV with hierarchical tags
- **Contains**: Organized tags (People/person, Places/beach), albums, locations
- **Import**: Tools > Import Metadata from CSV

### Photo Mechanic

- **Format**: IPTC data CSV
- **Contains**: Keywords, captions, location data
- **Import**: File > Export Metadata (batch apply)

### Apple Photos

- **Format**: Simple CSV
- **Contains**: Album names, basic keywords, descriptions
- **Import**: Third-party tools or manual organization

### XMP Sidecar Files

- **Format**: XML sidecar files (.xmp)
- **Contains**: All metadata in standard XMP format
- **Import**: Most professional photo software reads XMP automatically

### Google Photos Takeout Format

- **Format**: JSON metadata files
- **Contains**: Mimics Google Photos export format
- **Import**: Compatible with various import tools

## üõ°Ô∏è Why This Approach is Better

### Preserves File Integrity

- Original files remain untouched
- No risk of corrupting existing metadata
- Reversible process

### User Choice

- Users can choose which AI tags to keep
- Selective import of metadata
- No vendor lock-in to ibi's interpretation

### Software Compatibility

- Works with user's preferred photo management software
- Uses industry-standard formats
- Future-proof approach

### Professional Workflow

- Separates original camera data from user-added metadata
- Maintains archival quality
- Supports professional metadata standards

## üöÄ Recommended Workflow

1. **Extract files** with complete metadata preservation
2. **Verify existing metadata** in recovered files
3. **Only restore missing original data** (camera EXIF, GPS)
4. **Export ibi-specific metadata** in standard formats
5. **Import into photo management software** of choice
6. **Let users curate** AI tags and organize albums

This gives you the best of both worlds: complete data recovery with user control over how the metadata is used.

## üí° Key Benefits

- **5,312 AI-generated content tags** become searchable keywords
- **GPS and location data** preserved for mapping
- **Album organization** maintained through import
- **Camera metadata** restored only if missing
- **Compatible with any photo software** through standard formats
- **User maintains control** over their data organization

This approach transforms the recovery from just "getting files back" to creating a **fully organized, searchable photo library** that works with whatever software the user prefers!
